import{M as L,j as f,u as M,P as S,a as N,b as D,L as T,m as W}from"./proxy.B-0CQNal.js";import{r as t}from"./index.DTD2g3-w.js";class H extends t.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const s=e.offsetParent,c=s instanceof HTMLElement&&s.offsetWidth||0,o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft,o.right=c-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:n,isPresent:r,anchorX:e}){const s=t.useId(),c=t.useRef(null),o=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=t.useContext(L);return t.useInsertionEffect(()=>{const{width:h,height:l,top:g,left:i,right:x}=o.current;if(r||!c.current||!h||!l)return;const p=e==="left"?`left: ${i}`:`right: ${x}`;c.current.dataset.motionPopId=s;const u=document.createElement("style");return d&&(u.nonce=d),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[r]),f.jsx(H,{isPresent:r,childRef:c,sizeRef:o,children:t.cloneElement(n,{ref:c})})}const U=({children:n,initial:r,isPresent:e,onExitComplete:s,custom:c,presenceAffectsLayout:o,mode:d,anchorX:h})=>{const l=M(A),g=t.useId(),i=t.useCallback(p=>{l.set(p,!0);for(const u of l.values())if(!u)return;s&&s()},[l,s]),x=t.useMemo(()=>({id:g,initial:r,isPresent:e,custom:c,onExitComplete:i,register:p=>(l.set(p,!1),()=>l.delete(p))}),o?[Math.random(),i]:[e,i]);return t.useMemo(()=>{l.forEach((p,u)=>l.set(u,!1))},[e]),t.useEffect(()=>{!e&&!l.size&&s&&s()},[e]),d==="popLayout"&&(n=f.jsx(K,{isPresent:e,anchorX:h,children:n})),f.jsx(S.Provider,{value:x,children:n})};function A(){return new Map}const b=n=>n.key||"";function k(n){const r=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&r.push(e)}),r}const B=({children:n,custom:r,initial:e=!0,onExitComplete:s,presenceAffectsLayout:c=!0,mode:o="sync",propagate:d=!1,anchorX:h="left"})=>{const[l,g]=N(d),i=t.useMemo(()=>k(n),[n]),x=d&&!l?[]:i.map(b),p=t.useRef(!0),u=t.useRef(i),v=M(()=>new Map),[I,$]=t.useState(i),[C,R]=t.useState(i);D(()=>{p.current=!1,u.current=i;for(let m=0;m<C.length;m++){const a=b(C[m]);x.includes(a)?v.delete(a):v.get(a)!==!0&&v.set(a,!1)}},[C,x.length,x.join("-")]);const j=[];if(i!==I){let m=[...i];for(let a=0;a<C.length;a++){const y=C[a],E=b(y);x.includes(E)||(m.splice(a,0,y),j.push(y))}return o==="wait"&&j.length&&(m=j),R(k(m)),$(i),null}const{forceRender:w}=t.useContext(T);return f.jsx(f.Fragment,{children:C.map(m=>{const a=b(m),y=d&&!l?!1:i===C||x.includes(a),E=()=>{if(v.has(a))v.set(a,!0);else return;let P=!0;v.forEach(z=>{z||(P=!1)}),P&&(w?.(),R(u.current),d&&g?.(),s&&s())};return f.jsx(U,{isPresent:y,initial:!p.current||e?void 0:!1,custom:r,presenceAffectsLayout:c,mode:o,onExitComplete:y?void 0:E,anchorX:h,children:m},a)})})},O=({img:n=[]})=>{const[r,e]=t.useState(0),[s,c]=t.useState(1),o=()=>{c(1),e(h=>(h+1)%n.length)},d=()=>{c(-1),e(h=>(h-1+n.length)%n.length)};return f.jsxs("div",{className:"relative flex flex-col items-center transition duration-500 ease-in-out transform shadow-xl overflow-hidden rounded-xl sm:rounded-xl lg:border lg:border-gray-800 group-hover:shadow-2xl w-full h-60",children:[f.jsx(B,{mode:"wait",custom:s,children:f.jsx(W.img,{alt:"Capture du Projet",className:"object-cover object-top w-full h-full transition duration-500 sm:h-full md:scale-110 md:group-hover:scale-105",loading:"lazy",src:`/projects/${n[r]}`,initial:{x:s*250,opacity:0,scale:.95},animate:{x:0,opacity:1,scale:1,transition:{duration:.6,ease:[.25,.46,.45,.94]}},exit:{x:-s*250,opacity:0,scale:1.05,transition:{duration:.6,ease:[.25,.46,.45,.94]}}},n[r])}),f.jsx("button",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all",onClick:o,children:"◀"}),f.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all",onClick:d,children:"▶"})]})};export{O as default};
