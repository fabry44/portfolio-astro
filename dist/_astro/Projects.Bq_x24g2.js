import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Dy6lLLXr.js";import{M as L,u as M,P as O,a as _,b as T,L as D,m as P}from"./proxy.D-Sb5LrU.js";class H extends i.Component{getSnapshotBeforeUpdate(a){const r=this.props.childRef.current;if(r&&a.isPresent&&!this.props.isPresent){const l=r.offsetParent,c=l instanceof HTMLElement&&l.offsetWidth||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=c-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:s,isPresent:a,anchorX:r}){const l=i.useId(),c=i.useRef(null),o=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=i.useContext(L);return i.useInsertionEffect(()=>{const{width:n,height:t,top:j,left:u,right:x}=o.current;if(a||!c.current||!n||!t)return;const f=r==="left"?`left: ${u}`:`right: ${x}`;c.current.dataset.motionPopId=l;const h=document.createElement("style");return d&&(h.nonce=d),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${t}px !important;
            ${f}px !important;
            top: ${j}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[a]),e.jsx(H,{isPresent:a,childRef:c,sizeRef:o,children:i.cloneElement(s,{ref:c})})}const W=({children:s,initial:a,isPresent:r,onExitComplete:l,custom:c,presenceAffectsLayout:o,mode:d,anchorX:n})=>{const t=M(A),j=i.useId(),u=i.useCallback(f=>{t.set(f,!0);for(const h of t.values())if(!h)return;l&&l()},[t,l]),x=i.useMemo(()=>({id:j,initial:a,isPresent:r,custom:c,onExitComplete:u,register:f=>(t.set(f,!1),()=>t.delete(f))}),o?[Math.random(),u]:[r,u]);return i.useMemo(()=>{t.forEach((f,h)=>t.set(h,!1))},[r]),i.useEffect(()=>{!r&&!t.size&&l&&l()},[r]),d==="popLayout"&&(s=e.jsx(V,{isPresent:r,anchorX:n,children:s})),e.jsx(O.Provider,{value:x,children:s})};function A(){return new Map}const b=s=>s.key||"";function I(s){const a=[];return i.Children.forEach(s,r=>{i.isValidElement(r)&&a.push(r)}),a}const S=({children:s,custom:a,initial:r=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:o="sync",propagate:d=!1,anchorX:n="left"})=>{const[t,j]=_(d),u=i.useMemo(()=>I(s),[s]),x=d&&!t?[]:u.map(b),f=i.useRef(!0),h=i.useRef(u),y=M(()=>new Map),[k,w]=i.useState(u),[m,C]=i.useState(u);T(()=>{f.current=!1,h.current=u;for(let g=0;g<m.length;g++){const p=b(m[g]);x.includes(p)?y.delete(p):y.get(p)!==!0&&y.set(p,!1)}},[m,x.length,x.join("-")]);const N=[];if(u!==k){let g=[...u];for(let p=0;p<m.length;p++){const v=m[p],$=b(v);x.includes($)||(g.splice(p,0,v),N.push(v))}return o==="wait"&&N.length&&(g=N),C(I(g)),w(u),null}const{forceRender:E}=i.useContext(D);return e.jsx(e.Fragment,{children:m.map(g=>{const p=b(g),v=d&&!t?!1:u===m||x.includes(p),$=()=>{if(y.has(p))y.set(p,!0);else return;let R=!0;y.forEach(z=>{z||(R=!1)}),R&&(E?.(),C(h.current),d&&j?.(),l&&l())};return e.jsx(W,{isPresent:v,initial:!f.current||r?void 0:!1,custom:a,presenceAffectsLayout:c,mode:o,onExitComplete:v?void 0:$,anchorX:n,children:g},p)})})},B=({img:s=[]})=>{const[a,r]=i.useState(0),[l,c]=i.useState(1),o=n=>{n.stopPropagation(),c(1),r(t=>(t+1)%s.length)},d=n=>{n.stopPropagation(),c(-1),r(t=>(t-1+s.length)%s.length)};return e.jsxs("div",{className:"relative flex flex-col items-center transition duration-500 ease-in-out transform overflow-hidden rounded-xl w-full h-full",children:[e.jsx(S,{mode:"wait",custom:l,children:e.jsx(P.img,{alt:"Capture du Projet",className:"object-cover w-full h-full",loading:"lazy",src:`/projects/${s[a].replace(/\.(jpg|jpeg|png|webp)$/,"-medium.avif")}`,srcSet:`
                        /projects/${s[a].replace(/\.(jpg|jpeg|png|webp)$/,"-small.avif")} 320w,
                        /projects/${s[a].replace(/\.(jpg|jpeg|png|webp)$/,"-medium.avif")} 640w,
                        /projects/${s[a].replace(/\.(jpg|jpeg|png|webp)$/,"-large.avif")} 1024w
                    `,sizes:"(max-width: 600px) 250px, (max-width: 1200px) 640px, 1024px",initial:{x:l*250,opacity:0,scale:.95},animate:{x:0,opacity:1,scale:1,transition:{duration:.6,ease:[.25,.46,.45,.94]}},exit:{x:-l*250,opacity:0,scale:1.05,transition:{duration:.6,ease:[.25,.46,.45,.94]}}},s[a])}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",onClick:d,children:"◀"}),e.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",onClick:o,children:"▶"})]})]})};function F({name:s,highlights:a,technology:r,img:l,description:c,github:o,link:d,isOpen:n,toggleCard:t}){return e.jsxs(P.div,{className:`relative ProjectCard shadowstyle p-6 rounded-2xl shadow-lg transition-all duration-300 hover:shadow-2xl cursor-pointer 
                w-full sm:w-[200px] md:w-[350px] lg:w-[450px] mx-4`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onClick:t,children:[e.jsxs("div",{className:"w-full h-[250px] overflow-hidden rounded-lg",children:[" ",e.jsx(B,{img:l})]}),e.jsx("h3",{className:"text-xl flex justify-center items-center font-bold mt-5 mb-6 text-center h-16",children:s}),e.jsx("div",{className:"flex flex-wrap justify-center mt-4",children:e.jsx("ul",{className:"flex flex-wrap gap-2",children:r.map(({name:j,icon:u,class:x,style:f},h)=>{const y=typeof f=="string"?Object.fromEntries(f.split(";").map(k=>{const[w,m]=k.split(":").map(C=>C.trim());return w&&m?[w,m]:null}).filter(Boolean)):f;return e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:`flex items-center gap-x-2 rounded-full text-xs py-1 px-3 font-medium ${x}`,style:y,children:j})},h)})})}),e.jsx("div",{className:"absolute top-4 right-4 text-lg",children:n?"🔼":"🔽"}),e.jsx(S,{children:n&&e.jsx(P.div,{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-md text-gray-800 dark:text-gray-300 text-sm leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.4},dangerouslySetInnerHTML:{__html:c}})}),e.jsxs("footer",{className:"flex justify-center mt-5 gap-4",children:[o&&e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-x-2 text-blue-500 hover:underline",children:[e.jsx("span",{children:"🔗"})," Code"]}),d&&e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-x-2 text-green-500 hover:underline",children:[e.jsx("span",{children:"🌐"})," Preview"]})]})]})}function X({projects:s}){const[a,r]=i.useState(null),[l,c]=i.useState(!1),o=i.useRef(null);i.useEffect(()=>{const n=new IntersectionObserver(([t])=>{t.isIntersecting&&(c(!0),n.disconnect())},{threshold:.2});return o.current&&n.observe(o.current),()=>n.disconnect()},[]);const d=n=>{r(t=>t===n?null:n)};return e.jsx("div",{ref:o,className:"flex flex-wrap justify-center gap-16 mx-3.5",children:s.map((n,t)=>e.jsx(P.div,{initial:{opacity:0,y:-950,scale:0},animate:l?{opacity:1,y:0,scale:1}:{},transition:{duration:.8,delay:t*.35,ease:"easeOut"},children:e.jsx(F,{name:n.title,highlights:n.highlights,technology:n.technology,img:n.Allimg,description:n.description,github:n.github,link:n.link,isOpen:a===t,toggleCard:()=>d(t)})},t))})}export{X as default};
